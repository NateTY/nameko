!function(e){var t={};function l(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(s,n,function(t){return e[t]}.bind(null,n));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";l.r(t);const s="漩渦樹根 鼴鼠之爪 瓦斯球 琥珀菇 樹根寶石 鼴鼠尾巴 樹根群柱 生命樹根 固定結晶（棱柱） 固定結晶（樹枝星狀） 固定結晶（星盤狀） 結冰天使 花之砂 虹之砂 光輝之砂 熔岩球 玻璃之樹 天然小刀 寶藏甲".split(" "),n="堅硬黏土 除臭岩 濃稠樹液 樹液晶 萬年冰 彎彎零件 重重零件 小顆零件 黑砂鐵 紅砂鐵 黃砂鐵 道具黃 道具灰".split(" "),o="石頭 遲鈍 快腿 幸運 嬌小 鐵拳 發光 大力士 泳將 機器人 大胃王 毒 幹勁 飛翔 偵測 屏障 音感 夜視 爆炸 手持武器 潛水 搭乘 耐寒 光合成 可愛 聰明 食物 遠距離攻擊 近距離攻擊 勇氣 犄角 隱身".split(" "),r={};o.forEach((e,t)=>r[e]=`./imgs/skills/${(""+(t+1)).padStart(2,"0")}.png`);const i=e=>`./imgs/tunnels/${e}.jpg`,a=(i(1),i(6),i(7),i(7),i(7),i(8),i(8),i(8),i(9),i(9),i(9),{1:"菇菇 白兔菇菇 狗狗菇菇 菇菇燈泡 洋蔥頭菇菇 雙葉菇菇 毒箭菇菇 紅土菇菇 滑馬次郎 黑桃菇菇".split(" "),7:"菇菇 小白菇菇 白兔菇菇 狗狗菇菇 小羊菇菇 發光菇菇 蘋果菇菇 水貂菇菇 燈飾菇菇 高麗菜菇菇 白貓菇菇 冰錐菇菇".split(" "),8:"菇菇 喵咪菇菇 黃色菇菇 夾子菇菇 小辣椒菇菇 野貓菇菇 狗狗菇菇 迷彩菇菇 法老菇菇 紅土菇菇 滑馬次郎 頭巾菇菇".split(" "),9:"菇菇 惡魔菇菇 偽裝菇菇 章魚燒菇菇 黑沉菇菇 洋蔥頭菇菇 熔岩菇菇 忍者菇菇 功夫菇菇 苦澀菇菇 黑桃菇菇 原石菇菇 探險隊菇菇".split(" ")}),u={"7_1清涼結冰洞_筆直通道":a[7],"7_2清涼結冰洞_凹凸通道":a[7],"7_3清涼結冰洞_光滑通道":a[7],"8_1砂牆空洞_沙沙通道":a[8],"8_2砂牆空洞_隆起通道":a[8],"8_3砂牆空洞_厚重通道":a[8],"9_1灼熱熔岩窟_咕嘟咕嘟區":a[9],"9_2灼熱熔岩窟_滾燙滾燙區":a[9],"9_3灼熱熔岩窟_冒出泡泡區":a[9]},f="菇菇 枯哭菇菇 小白菇菇 惡魔菇菇 偽裝菇菇 喵咪菇菇 光頭菇菇 白兔菇菇 軟化菇菇 白巧克力菇菇 河童菇菇 不良菇菇 黃色菇菇 夾子菇菇 浪潮菇菇 偽浪潮菇菇 小辣椒菇菇 天使菇菇 野貓菇菇 狗狗菇菇 章魚燒菇菇 黑沉菇菇 迷彩菇菇 菇菇燈泡 小羊菇菇 洋蔥頭菇菇 熔岩菇菇 發光菇菇 將軍菇菇 經理學妹菇菇 緞帶菇菇 NEO菇菇 花粉症菇菇 忍者菇菇 春天菇菇 頑皮菇菇 蘋果菇菇 鱗柄白鵝膏 功夫菇菇 雙葉菇菇 水貂菇菇 毒箭菇菇 苦澀菇菇 畫家菇菇 螢火蟲菇菇 燈飾菇菇 法老菇菇 高麗菜菇菇 白貓菇菇 冰錐菇菇 _051 紅土菇菇 滑馬次郎 頭巾菇菇 _055 黑桃菇菇 原石菇菇 探險隊菇菇 _059 _060 小小菇菇 長高菇菇 巨人菇菇".split(" "),c={};function d(e,t){e.key,t.map(e=>e.name).join(", ");let l=[],s=[];for(let n of e.memos){const{type:e,valueThresholds:o,skillValueBonus:r,skills:i}=n,[a,u,f,c]=r||[];i&&i.join(", "),o&&(o||[]).map(e=>e.join(":")).join(", "),r&&r.join(" ");let d=!1;if("總和"===e){const[e,l]=o[0];let s=0,n=!0;for(let l of t){const t={name:l.name,skills:l.skills,red:l.values[0],blue:l.values[1],green:l.values[2]};c&&!t.skills.includes(a)&&(n=!1),s+=t[e],!c&&t.skills.includes(a)&&e===u&&(s+=f)}a&&c&&n&&(s+=f),s>=l&&(d=!0)}else if("有1隻"===e||"有2隻"===e||"有3隻"===e){const l=parseInt(e.substr(1,1));let s=0;for(let e of t){let t=!0;const n={name:e.name,skills:e.skills,red:e.values[0],blue:e.values[1],green:e.values[2]};for(let e of o){const[l,s]=e;let o=n[l];if(n.skills.includes(a)&&l===u&&(o+=f),o<s){t=!1;break}}if(n.name,n.skills.join(", "),n.red,n.blue,n.green,t&&++s===l){d=!0;break}}}else if("1隻有skill"===e)for(let e of t){let t=!0;for(let l of i)if(!e.skills.includes(l)){t=!1;break}if(t){d=!0;break}}else if("全部有skill"===e){let e=0;for(let l of t){let t=!0;for(let e of i)if(!l.skills.includes(e)){t=!1;break}t&&e++}d=e===t.length}(d?l:s).push(n)}return e.memos.length,e.key,{team:t,passedMemos:l,unpassedMemos:s}}function p(e,t,l=!0,s=(()=>null)){if(console.log("* "+e.key+" with all combinations"),!function(e){for(let t of e){if(!f.includes(t.name))return console.log(" >> verify bad 1",t,e),!1;for(let l of t.values)if(!Number.isInteger(l)||l<=0)return console.log(" >> verify bad 2",t,e),!1;for(let l of t.skills)if(!o.includes(l))return console.log(" >> verify bad 3",t,e),!1}return!0}(t))throw"goAll: BAD value";u[e.key]&&(t=t.filter(t=>u[e.key].includes(t.name)));const n=e.count||3;if(!l&&t.length<=0||l&&n>t.length)throw console.log(l,n,t.length),"goAll: BAD count";let r=t.length+(l?0:2);r=r*(r-1)*(r-2)/6;const i=[];!function o(a=[],u=0,f=!0){for(let c=u;c<t.length;c++){const u=a.slice();u.push(t[c]),u.length===n?i.push(d(e,u)):o(u,c+(l?1:0),!1),f&&s(Math.round(100*i.length/r))}}(),i.sort(m);for(let t=Math.min(50,i.length)-1;t>=0;t--)g(i[t],e);return i}function m(e,t){let l=[(e,t)=>{let l=0;e.passedMemos.forEach(e=>{n.includes(e.reward[0])&&(l+=e.reward[1])});let s=0;return t.passedMemos.forEach(e=>{n.includes(e.reward[0])&&(s+=e.reward[1])}),s-l},(e,t)=>{let l=0;e.passedMemos.forEach(e=>{s.includes(e.reward[0])&&(l+=e.reward[1])});let n=0;return t.passedMemos.forEach(e=>{s.includes(e.reward[0])&&(n+=e.reward[1])}),n-l},(e,t)=>t.passedMemos.length-e.passedMemos.length];for(let s=0;s<l.length;s++){let n=l[s](e,t);if(0!==n||s===l.length-1)return n}console.log("return WTF")}function g(e,t){let{team:l,passedMemos:s,unpassedMemos:n}=e;s.length,t.memos.length,l.map(e=>e.name).join(", ");for(let e of n){let{type:t,reward:l,valueThresholds:s,skills:n,name:o}=e;l[0],l[1],s&&s.map(e=>e.join(":")).join(),n&&n.join(",")}}f.forEach((e,t)=>c[e]=`./imgs/namekos/${(""+(t+1)).padStart(2,"0")}.png`);const h=e=>{postMessage({type:"percentage",results:e})};onmessage=function(e){const{tunnel:t,namekos:l}=e.data;try{const s=p(t,l,!0,h);postMessage({type:"results",results:s})}catch(e){postMessage({type:"error",results:e})}}}]);